<?phpclass print_pdf_tree extends CI_Model {    function __construct (){        parent::__construct();        	}	    private function preptable($colModel=false,$params=false) {        $data = $params->data;	    $expanded = $params->ExpandColumn;	       // =================== head ====================        $this->mypdf->SetFillColor(0, 0, 255);        $this->mypdf->SetTextColor(255);        $this->mypdf->SetDrawColor(0, 0, 0);        $this->mypdf->SetLineWidth(0.3);        $this->mypdf->SetFont('times', 'B');        $this->mypdf->SetY(25);        foreach($colModel as $key=>$head) {            $this->mypdf->Cell(50, 7, $head, 1, 0, 'C', 1);            $w[] = 50;        }        $this->mypdf->Ln();        // ====================== data =======================        $this->mypdf->SetFillColor(224, 235, 255);        $this->mypdf->SetTextColor(0);        $this->mypdf->SetFont('','');        $fill = 0;        foreach($data['rows'] as $key=>$row) {            foreach($colModel as $keyModel=>$rowModel){                if($expanded == $keyModel){                    if($row->n_level != 1){                        $space = str_repeat('   ',$row->n_level);                    }else{                        $space = "";                    }                       }else{                    $space = "";                }                $this->mypdf->Cell(50, 7, $space.$row->$keyModel, 'LR', 0, 'L', $fill);            }            $this->mypdf->Ln();            $fill=!$fill;        }        // ===================================================        $this->mypdf->Cell(array_sum($w), 0, '', 'T');    }	function index($params=false){//	    dump($params);	    $data=$params->data;	    $colModel=$params->colModel;	    $pdf=$params->pdf;		$this->load->library('mypdf');		// set document information		$this->mypdf->SetCreator(PDF_CREATOR);		$this->mypdf->SetAuthor('girista');		$this->mypdf->SetTitle('PDF');		$this->mypdf->SetSubject('PDF');		$this->mypdf->SetKeywords('girista');		$this->mypdf->setHeaderData('', '', $pdf['header']['caption']);		$this->mypdf->setHeaderFont(Array(PDF_FONT_NAME_MAIN, '', PDF_FONT_SIZE_MAIN));		$this->mypdf->setFooterFont(Array(PDF_FONT_NAME_DATA, '', PDF_FONT_SIZE_DATA));		$this->mypdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);		$this->mypdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT);		$this->mypdf->setHeaderMargin(PDF_MARGIN_HEADER);		$this->mypdf->setFooterMargin(PDF_MARGIN_FOOTER);		$this->mypdf->SetAutoPageBreak(TRUE, 10);		$this->mypdf->setImageScale(PDF_IMAGE_SCALE_RATIO);		$this->mypdf->AddPage();        $arr = array();                foreach($colModel as $key=>$row):            if(@$pdf['show_col']){                if(@$pdf['show_col'][$key]==$key){                    $arr[$row['index']] = $row['label'];                }            }else{                if(@$row['editable'] == true || @$row['viewrecords'] == true){                    $arr[$row['index']] = $row['label'];                }            }        endforeach;        $header = $arr;        $this->preptable($header, $params);        $nama = 'PDF_'.date('dmYHis');		$this->mypdf->Output($nama.'.pdf', 'I');	}}?>